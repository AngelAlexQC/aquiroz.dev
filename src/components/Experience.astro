---
export interface Props {
  lang: 'es' | 'en';
}

const { lang } = Astro.props;

const experiences = [
  {
    title: lang === 'es' ? 'Líder Técnico' : 'Technical Lead',
    company: 'Libélula Soft',
    period: lang === 'es' ? 'Feb 2024 – Presente' : 'Feb 2024 – Present',
    description: lang === 'es' 
      ? 'Lidero proyectos de sistemas empresariales en PHP (Yii2), diseño de APIs y automatización DevOps. Superviso calidad de código y mentorización de equipos de 5+ desarrolladores. Colaboro con stakeholders para entregas a tiempo y dentro de presupuesto.'
      : 'Lead enterprise systems projects in PHP (Yii2), API design and DevOps automation. Supervise code quality and mentor teams of 5+ developers. Collaborate with stakeholders for timely and budget-compliant deliveries.'
  },
  {
    title: lang === 'es' ? 'Ingeniero Fullstack & Backend' : 'Fullstack & Backend Engineer',
    company: 'Freelance',
    period: lang === 'es' ? 'May 2019 – Presente' : 'May 2019 – Present',
    description: lang === 'es' 
      ? 'Diseño e implemento soluciones personalizadas con NestJS, monorepos y empaquetado NPM. Automatizo infraestructuras CI/CD y pipelines de despliegue. Entrego proyectos de alto impacto para clientes de EE. UU., México y Ecuador.'
      : 'Design and implement custom solutions with NestJS, monorepos and NPM packaging. Automate CI/CD infrastructures and deployment pipelines. Deliver high-impact projects for clients from the US, Mexico and Ecuador.'
  },
  {
    title: lang === 'es' ? 'Líder Técnico / Desarrollador Full Stack' : 'Technical Lead / Full Stack Developer',
    company: 'Edgebound',
    period: lang === 'es' ? 'Jul 2022 – Abr 2023' : 'Jul 2022 – Apr 2023',
    description: lang === 'es' 
      ? 'Migré plataformas a Next.js, mejorando rendimiento y mantenibilidad. Desarrollé microservicios con RabbitMQ e integré HCL Commerce. Implementé pipelines CI/CD y estándares de calidad de código.'
      : 'Migrated platforms to Next.js, improving performance and maintainability. Developed microservices with RabbitMQ and integrated HCL Commerce. Implemented CI/CD pipelines and code quality standards.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Full Stack' : 'Full Stack Developer',
    company: 'APS',
    period: lang === 'es' ? 'Nov 2021 – Jul 2022' : 'Nov 2021 – Jul 2022',
    description: lang === 'es' 
      ? 'Desarrollé funcionalidades en VueJS, NextJS y Ruby on Rails. Lideré un proyecto frontend con Next.js y arquitectura escalable. Mejoré flujos de desarrollo con GitHub Actions y ESLint.'
      : 'Developed features in VueJS, NextJS and Ruby on Rails. Led a frontend project with Next.js and scalable architecture. Improved development workflows with GitHub Actions and ESLint.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Full Stack' : 'Full Stack Developer',
    company: 'GAD Portoviejo',
    period: lang === 'es' ? 'Feb 2020 – Sep 2021' : 'Feb 2020 – Sep 2021',
    description: lang === 'es' 
      ? 'Implementé sistema de recolección de residuos en tiempo real con Laravel + Node.js. Frontend en Angular + Ionic, integraciones Google Maps API y Firebase. Notifiqué usuarios vía Twilio y Firebase Cloud Messaging.'
      : 'Implemented real-time waste collection system with Laravel + Node.js. Frontend in Angular + Ionic, Google Maps API and Firebase integrations. User notifications via Twilio and Firebase Cloud Messaging.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Full Stack' : 'Full Stack Developer',
    company: lang === 'es' ? 'Inst. Superior Tecnológico Portoviejo' : 'Portoviejo Technical Institute',
    period: lang === 'es' ? 'Abr 2019 – Dic 2021' : 'Apr 2019 – Dec 2021',
    description: lang === 'es' 
      ? 'Desarrollé sistema académico integral: matrículas, pagos, facturación electrónica (Datil API). Frontend en Angular, backend en Laravel. Optimicé procesos administrativos y de asistencia.'
      : 'Developed comprehensive academic system: enrollment, payments, electronic invoicing (Datil API). Frontend in Angular, backend in Laravel. Optimized administrative and attendance processes.'
  }
];
---

<section id="experience" class="py-24 bg-gradient-to-br from-gray-50 to-blue-50">
  <div class="max-w-7xl mx-auto px-4">
    <div class="text-center mb-16">
      <span class="text-blue-600 font-semibold text-sm uppercase tracking-wider">
        {lang === 'es' ? 'Mi trayectoria' : 'My journey'}
      </span>
      <h2 class="text-5xl font-bold mt-4 mb-6">
        <span class="text-gray-900">{lang === 'es' ? 'Experiencia' : 'Experience'}</span>
        <span class="gradient-text"> {lang === 'es' ? 'Profesional' : 'Professional'}</span>
      </h2>
    </div>
    
    <div class="relative">
      <!-- Timeline line -->
      <div class="absolute left-8 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-blue-600 via-purple-600 to-pink-600 transform md:-translate-x-0.5"></div>
      
      <div class="space-y-12">
        {experiences.map((exp, index) => (
          <div class={`relative flex items-center ${index % 2 === 0 ? 'md:flex-row' : 'md:flex-row-reverse'}`}>
            <!-- Timeline dot -->
            <div class="absolute left-8 md:left-1/2 w-4 h-4 bg-white border-4 border-blue-600 rounded-full transform md:-translate-x-2 z-10 shadow-lg"></div>
            
            <!-- Content card -->
            <div class={`ml-16 md:ml-0 md:w-5/12 ${index % 2 === 0 ? '' : 'md:mr-auto'}`}>
              <div class="bg-white rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all duration-300 border border-gray-100">
                <!-- Company badge -->
                <div class="inline-flex items-center bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 px-4 py-2 rounded-full text-sm font-medium mb-4">
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                  </svg>
                  {exp.company}
                </div>
                
                <h3 class="text-xl font-bold text-gray-900 mb-2">{exp.title}</h3>
                <p class="text-blue-600 font-medium mb-4">{exp.period}</p>
                <p class="text-gray-700 leading-relaxed">{exp.description}</p>
                
                <!-- Tech stack indicators -->
                <div class="flex flex-wrap gap-2 mt-4">
                  {/* Add relevant tech tags based on the role */}
                  {index === 0 && (
                    <>
                      <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">PHP</span>
                      <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs">Yii2</span>
                      <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">DevOps</span>
                    </>
                  )}
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
