---
import { experienceDates, formatPeriod } from "../utils/dates";

export interface Props {
  lang: 'es' | 'en';
}

const { lang } = Astro.props;

const experiences = [
  {
    title: lang === 'es' ? 'Líder Técnico' : 'Technical Lead',
    company: 'Libélula Soft',
    period: formatPeriod(experienceDates.libelulaStart, null, lang),
    description: lang === 'es' 
      ? 'Desarrollo sistemas empresariales con PHP (Yii2), diseño de APIs y optimización de procesos clave. Integro módulos frontend con React y Next.js. Automatizo flujos DevOps, pipelines CI/CD, revisión de código y mentoría de equipos.'
      : 'Developed enterprise systems using PHP (Yii2), API design, and optimization of key business processes. Integrated frontend modules using React and Next.js. Automated DevOps flows, CI/CD pipelines, code review, and team mentoring.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Backend' : 'Back-end Developer',
    company: 'Libélula Soft',
    period: formatPeriod(experienceDates.libelulaBackendStart, experienceDates.libelulaBackendEnd, lang),
    description: lang === 'es' 
      ? 'Desarrollé soluciones backend especializadas con MongoDB, Yii2 y AWS. Enfoque en arquitectura escalable y optimización de bases de datos.'
      : 'Developed specialized backend solutions with MongoDB, Yii2 and AWS. Focus on scalable architecture and database optimization.'
  },
  {
    title: lang === 'es' ? 'Ingeniero de Software Freelance' : 'Freelance Software Engineer',
    company: 'Freelance',
    period: formatPeriod(experienceDates.freelanceStart, null, lang),
    description: lang === 'es' 
      ? 'Diseño y desarrollo soluciones de software confiables, escalables y personalizadas para empresas y emprendedores. Me enfoco en arquitectura limpia, código eficiente y valor a largo plazo en cada proyecto.'
      : 'I design and develop reliable, scalable, and customized software solutions for businesses and entrepreneurs. I focus on clean architecture, efficient code, and long-term value in every project I work on.'
  },
  {
    title: lang === 'es' ? 'Líder Técnico' : 'Technical Lead',
    company: 'Edgebound',
    period: formatPeriod(experienceDates.edgeboundTechLeadStart, experienceDates.edgeboundTechLeadEnd, lang),
    description: lang === 'es' 
      ? 'Lideré proyecto a nivel técnico para mejorar rendimiento y experiencia de desarrollo, realizando migración de CRA a Next.js e implementando flujos de trabajo para revisión de errores y despliegue.'
      : 'Worked leading a project at a technical level to improve performance and development experience, performing a migration from CRA to Next.js and implementing workflows for proper bug checking and deployment.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Full Stack' : 'Full Stack Developer',
    company: 'Edgebound',
    period: formatPeriod(experienceDates.edgeboundFullStackStart, experienceDates.edgeboundFullStackEnd, lang),
    description: lang === 'es' 
      ? 'Diseñé e implementé nuevas funcionalidades y mejoras de calidad de código para aplicaciones en arquitectura de microservicios comunicándose con RabbitMQ, con HCL Commerce como núcleo.'
      : 'I designed and implemented new functionalities and code quality improvements for several applications of a large project deployed in a microservices architecture communicating with RabbitMQ with HCL Commerce as core.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Full Stack' : 'Full Stack Developer',
    company: 'APS',
    period: formatPeriod(experienceDates.apsStart, experienceDates.apsEnd, lang),
    description: lang === 'es' 
      ? 'Implementé mejoras, nuevas funcionalidades y proyectos desde cero en backend y frontend de aplicaciones de la empresa con VueJS, NextJS y Ruby on Rails.'
      : 'I implemented improvements, new functionalities and projects from scratch in the backend and frontend of some of the company\'s applications with VueJS, NextJS and Ruby on Rails.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Full Stack' : 'Full Stack Developer',
    company: lang === 'es' ? 'Instituto Superior Tecnológico Portoviejo' : 'Portoviejo Technical Institute',
    period: formatPeriod(experienceDates.portoviejoInstStart, experienceDates.portoviejoInstEnd, lang),
    description: lang === 'es' 
      ? 'Desarrollé sistema para gestionar procesos de institución académica: Admisión, Matriculación, Pagos de Matrículas y Pensiones, Facturación Electrónica, Gestión de Cursos y Horarios, Asistencia y Calificaciones. Desarrollado con Laravel (Backend) y Angular (Frontend), integrando API de Datil para Facturación Electrónica.'
      : 'I developed a system to manage processes of an academic institution such as Admission, Enrollment, Tuition and Deferred Fees Payments, Electronic Invoicing, Course and Schedule Management, Attendance, and Grades. The system was developed in Laravel in the Backend and Angular in the Frontend, in addition to the integration with Datil API for Electronic Invoicing.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Full Stack' : 'Full Stack Developer',
    company: 'GAD Portoviejo',
    period: formatPeriod(experienceDates.portoviejoGadStart, experienceDates.portoviejoGadEnd, lang),
    description: lang === 'es' 
      ? 'Como tesis de grado, desarrollé sistema para gestión de vehículos recolectores, ubicación en tiempo real y notificaciones para mejorar el sistema de recolección de residuos. Desarrollado con Laravel y NodeJS (backend), Angular e Ionic (frontend), integrando Google Maps API, Firebase Cloud Messaging y Twilio API.'
      : 'As a graduate thesis, I developed a system for the management of collection vehicles, real-time location, and user notifications to improve the waste collection system of a municipality in Manabí - Ecuador. The system was developed with Laravel and NodeJS in the backend and with Angular and Ionic in the front, in addition to integrations with Google Maps API, Firebase Cloud Messaging, and Twilio API.'
  },
  {
    title: lang === 'es' ? 'Desarrollador Full Stack' : 'Full Stack Developer',
    company: 'Club Social Mejía',
    period: formatPeriod(experienceDates.clubSocialStart, experienceDates.clubSocialEnd, lang),
    description: lang === 'es' 
      ? 'Desarrollé aplicación web para gestionar procesos de Inscripción de Socios, Gestión de Pagos Mensuales, Asistencia a Reuniones, Cobranzas y Multas para 700+ miembros de un Club Social. Desarrollado con Laravel (Backend) y Angular (Frontend).'
      : 'I developed a web application to manage the processes of Membership Enrollment, Monthly Payment Management, Meeting Attendance, Collections, and Fines for the 700+ members of a Social Club in the parish of Mejía - Portoviejo. The system was developed with Laravel in the Backend and Angular in the Frontend.'
  }
];
---

<section id="experience" class="py-24 bg-gradient-to-br from-gray-50 to-blue-50">
  <div class="max-w-4xl mx-auto px-4">
    <div class="text-center mb-16">
      <span class="text-blue-600 font-semibold text-sm uppercase tracking-wider">
        {lang === 'es' ? 'Mi trayectoria' : 'My journey'}
      </span>
      <h2 class="text-5xl font-bold mt-4 mb-6">
        <span class="text-gray-900">{lang === 'es' ? 'Experiencia' : 'Experience'}</span>
        <span class="gradient-text"> {lang === 'es' ? 'Profesional' : 'Professional'}</span>
      </h2>
    </div>
    
    <div class="relative">
      <!-- Timeline line -->
      <div class="absolute left-6 top-0 bottom-0 w-0.5 bg-gradient-to-b from-blue-600 via-purple-600 to-pink-600"></div>
      
      <div class="space-y-8">
        {experiences.map((exp, index) => (
          <div class="relative flex items-start">
            <!-- Timeline dot -->
            <div class="relative z-10 flex items-center justify-center w-12 h-12 bg-white border-4 border-blue-600 rounded-full shadow-lg">
              <div class="w-3 h-3 bg-blue-600 rounded-full"></div>
            </div>
            
            <!-- Content card -->
            <div class="ml-8 flex-1">
              <div class="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100">
                <!-- Header -->
                <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4">
                  <div>
                    <h3 class="text-lg font-bold text-gray-900 mb-1">{exp.title}</h3>
                    <p class="text-blue-600 font-medium">{exp.company}</p>
                  </div>
                  <div class="text-sm text-gray-500 font-medium mt-2 md:mt-0">
                    {exp.period}
                  </div>
                </div>
                
                <!-- Description -->
                <p class="text-gray-700 leading-relaxed">{exp.description}</p>
                
                <!-- Tech stack (optional) -->
                <div class="flex flex-wrap gap-2 mt-4">
                  {index === 0 && (
                    <>
                      <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">PHP</span>
                      <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs font-medium">Yii2</span>
                      <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium">DevOps</span>
                    </>
                  )}
                  {index === 1 && (
                    <>
                      <span class="bg-indigo-100 text-indigo-800 px-2 py-1 rounded text-xs font-medium">NestJS</span>
                      <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">Docker</span>
                      <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium">CI/CD</span>
                    </>
                  )}
                  {index === 2 && (
                    <>
                      <span class="bg-cyan-100 text-cyan-800 px-2 py-1 rounded text-xs font-medium">Next.js</span>
                      <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs font-medium">RabbitMQ</span>
                      <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs font-medium">HCL Commerce</span>
                    </>
                  )}
                  {index === 3 && (
                    <>
                      <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium">Vue.js</span>
                      <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">Next.js</span>
                      <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium">Ruby on Rails</span>
                    </>
                  )}
                  {index === 4 && (
                    <>
                      <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs font-medium">Laravel</span>
                      <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium">Node.js</span>
                      <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium">Angular</span>
                    </>
                  )}
                  {index === 5 && (
                    <>
                      <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs font-medium">Angular</span>
                      <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs font-medium">Laravel</span>
                      <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium">API Datil</span>
                    </>
                  )}
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
